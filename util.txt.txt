utility functions for version 3
utility functions for version 4